<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>CÃ¢u há»i</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Ná»€N SAO -->
<canvas id="stars"></canvas>

<div class="container">

  <!-- NHáº¬P TÃŠN -->
  <div class="name-box">
    <input
      id="nameInput"
      type="text"
      placeholder="Nháº­p tÃªn cá»§a báº¡n..."
    />
    <button onclick="saveName()">XÃ¡c nháº­n tÃªn</button>
  </div>

  <!-- CÃ‚U Há»I -->
  <div class="question-box">
    <h2>ğŸŒŒ Báº¡n nghÄ© sao vá» má»‘i quan há»‡ cá»§a 2 chÃºng ta?</h2>

    <button class="answer" onclick="chooseAnswer('a1.html','Chá»‰ lÃ  báº¡n')" disabled>
      ğŸŒŸ Chá»‰ lÃ  báº¡n
    </button>

    <button class="answer" onclick="chooseAnswer('a2.html','CÃ³ cáº£m tÃ¬nh')" disabled>
      ğŸ’– CÃ³ cáº£m tÃ¬nh
    </button>

    <button class="answer" onclick="chooseAnswer('a3.html','Báº¡n thÃ¢n')" disabled>
      ğŸŒ™ Báº¡n thÃ¢n
    </button>
  </div>

</div>

<!-- ===== LOGIC ===== -->
<script>
const FORM_URL =
  "https://docs.google.com/forms/d/e/1FAIpQLSdX53A-IHszcg-A8ogaHCeEZyz1I9KwcqeNR9RZCtWSEaZ7Zw/formResponse";

const ENTRY_NAME = "entry.1397404752";
const ENTRY_ANSWER = "entry.1575105345";

function saveName() {
  const name = document.getElementById("nameInput").value.trim();
  if (!name) {
    alert("âš ï¸ Báº¡n pháº£i nháº­p tÃªn trÆ°á»›c!");
    return;
  }
  localStorage.setItem("userName", name);
  unlockAnswers();
  alert("âœ… ÄÃ£ lÆ°u tÃªn: " + name);
}

function chooseAnswer(page, answer) {
  const name = localStorage.getItem("userName");

  if (!name) {
    alert("âš ï¸ Vui lÃ²ng nháº­p vÃ  xÃ¡c nháº­n tÃªn trÆ°á»›c!");
    return;
  }

  const data = new FormData();
  data.append(ENTRY_NAME, name);
  data.append(ENTRY_ANSWER, answer);

  fetch(FORM_URL, {
    method: "POST",
    mode: "no-cors",
    body: data
  });

  // chuyá»ƒn trang nhÆ° cÅ©
  setTimeout(() => {
    location.href = page;
  }, 300);
}

function lockAnswers() {
  document.querySelectorAll(".answer").forEach(btn => {
    btn.disabled = true; // Táº¥t cáº£ nÃºt sáº½ bá»‹ vÃ´ hiá»‡u hÃ³a
  });
}

function unlockAnswers() {
  document.querySelectorAll(".answer").forEach(btn => {
    btn.disabled = false; // Má»Ÿ láº¡i cÃ¡c nÃºt Ä‘Ã¡p Ã¡n
  });
}

window.addEventListener("DOMContentLoaded", () => {
  lockAnswers();  // KhÃ³a nÃºt Ä‘Ã¡p Ã¡n khi má»›i vÃ o
  if (localStorage.getItem("userName")) {
    unlockAnswers();  // Má»Ÿ khÃ³a nÃºt khi tÃªn Ä‘Ã£ Ä‘Æ°á»£c xÃ¡c nháº­n
  }
});
</script>

<!-- ===== CANVAS SAO (KHÃ”NG CHáº¶N INPUT) ===== -->
<script>
const canvas = document.getElementById("stars");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

const stars = Array.from({ length: 120 }, () => ({
  x: Math.random() * canvas.width,
  y: Math.random() * canvas.height,
  r: Math.random() * 1.5 + 0.5,
  s: Math.random() * 0.5 + 0.2
}));

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "white";
  stars.forEach(star => {
    star.y += star.s;
    if (star.y > canvas.height) {
      star.y = 0;
      star.x = Math.random() * canvas.width;
    }
    ctx.beginPath();
    ctx.arc(star.x, star.y, star.r, 0, Math.PI * 2);
    ctx.fill();
  });
  requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
